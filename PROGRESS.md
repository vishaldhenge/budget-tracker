# ðŸ“Š BudgetTracker Project Progress

## ðŸ“‚ Project Structure
BudgetTracker/
â”‚â”€â”€ BudgetTracker.Api/ # API Layer
â”‚
â”‚â”€â”€ BudgetTracker.Dal/ # Data Access Layer
â”‚
â”‚â”€â”€ BudgetTracker.Database/ # Database scripts
â”‚ â”‚â”€â”€ SchemaChanges/ # schema migrations (tables, constraints, etc.)
â”‚ â”‚ â”œâ”€â”€ SchemaChanges.sql
â”‚
â”‚ â”‚â”€â”€ DataChanges/ # data scripts (seeding, inserts, reference data)
â”‚ â”‚ â”œâ”€â”€ DataChanges.sql
â”‚
â”‚â”€â”€ budget-tracker-frontend/ # Angular frontend
â”‚ â”‚â”€â”€ projects/
â”‚ â”‚ â”‚â”€â”€ app-main/ # main budgeting app (after login)
â”‚ â”‚ â”‚â”€â”€ app-access/ # authentication / login app

| Day       | Work Done / Planned                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| --------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Day 0** | **Tech Stack & Architecture Decisions**<br>â€¢ **Backend**: ASP.NET Core 8 Web API<br>â€¢ **Database**: PostgreSQL + Dapper ORM<br>â€¢ **Frontend**: Angular 20 (multi-app workspace, SCSS styling)<br>â€¢ **Deployment**: Docker (target, later phase)<br><br>**Architecture**<br>â€¢ Clean separation:<br>â€ƒ- API Layer (`BudgetTracker.Api`)<br>â€ƒ- Data Access Layer (`BudgetTracker.Dal`)<br>â€ƒ- Database scripts (`BudgetTracker.Database` â†’ `SchemaChanges/`, `DataChanges/`)<br>â€ƒ- Angular frontend (`budget-tracker-frontend` â†’ `app-access`, `app-main`)<br>â€¢ Database conventions: `BIGSERIAL` PKs, audit fields, explicit FK naming                                                                                                                                                                                                                                                                                                                                                                                     |
| **Day 1** | **Repo & Project Setup**<br>â€¢ Created **GitHub repo** `budget-tracker`<br>â€¢ Added **`.gitignore`** (VS template)<br>â€¢ Added **`README.md`** (description, roadmap, license)<br><br>**Backend Solution Setup**<br>â€¢ Created solution `BudgetTracker` with projects:<br>â€ƒ- `BudgetTracker.Api` â†’ API Layer<br>â€ƒ- `BudgetTracker.Dal` â†’ Data Access Layer<br>â€ƒ- `BudgetTracker.Database` â†’ DB scripts (`SchemaChanges/`, `DataChanges/`)<br><br>**Frontend Workspace Setup**<br>â€¢ Created Angular **multi-app workspace** `budget-tracker-frontend` with apps:<br>â€ƒ- `app-access` â†’ login/authentication UI<br>â€ƒ- `app-main` â†’ main budgeting app (post-login)                                                                                                                                                                                                                                                                                                                                                            |
| **Day 2** | **Database Setup**<br>â€¢ Tables created: `users`, `user_profiles`, `roles`, `user_roles`<br>â€¢ Conventions:<br>â€ƒ- PKs: `BIGSERIAL`<br>â€ƒ- Audit fields: `created_at`, `updated_at`<br>â€ƒ- Explicit FK naming (`fk_user_roles_user_id`)<br><br>**Seeding**<br>â€¢ Initial **Admin user + Admin role** seeded via SQL script (`DataChanges/`)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| **Day 3** | **Angular + .NET Integration**<br>â€¢ **Kept default Angular `dist/` output structure** (each app builds to its own subfolder under `dist/`).<br>â€¢ Wrote **extension method** in .NET to serve Angular apps dynamically:<br>â€ƒ- `/access/` â†’ `dist/app-access/index.html`<br>â€ƒ- `/main/` â†’ `dist/app-main/index.html`<br>â€¢ Allowed serving both apps under same ASP.NET Core server without copying to `wwwroot`.<br><br>**Build Automation**<br>â€¢ Installed **`concurrently`** â†’ added script to build **both Angular apps (`app-access`, `app-main`) in parallel**.<br><br>**Angular Config Fixes**<br>â€¢ Updated `angular.json`:<br>â€ƒ- Ensured correct `outputPath` (`dist/app-access`, `dist/app-main`).<br>â€ƒ- Added **`baseHref`** (`/access/`, `/main/`) so JS/CSS assets resolve correctly.<br><br>**Verification**<br>â€¢ Verified `/access/` and `/main/` returned their respective `index.html`.<br>â€¢ Confirmed static assets (`main.js`, `polyfills.js`, `styles.css`) load successfully with correct base paths. |
| **Day 4**              | â€¢ **JWT Setup**<br>â€ƒ- Created `JwtSettings` model (`Key`, `Issuer`, `Audience`, `ExpiryMinutes`).<br>â€ƒ- Added **`JwtService`** â†’ handles token generation with claims (UserId, Email, Role, JTI).<br>â€ƒ- Registered `JwtService` + strongly typed `JwtSettings` in DI using `IOptions<T>`.<br>â€¢ **Service Organization**<br>â€ƒ- Added `AddApplicationServices` **IServiceCollection extension method** to centralize service registrations.<br>â€¢ **API Path Handling**<br>â€ƒ- Introduced `app.UsePathBase("/api")` â†’ ensures all controller routes are prefixed with `/api`.<br>â€¢ **Auth Planning**<br>â€ƒ- Decided global `[Authorize]` will be enforced later, with `[AllowAnonymous]` for login/register.<br>â€ƒ- Confirmed Angular routes remain unaffected by `/api` prefix.                                                                                                                                |
| **Day 5 (Future - Tentative)** | â€¢ **JWT Validation**<br>â€ƒ- Configure `AddAuthentication().AddJwtBearer(...)` with validation rules.<br>â€ƒ- Add middleware to validate issuer, audience, lifetime, signing key.<br>â€ƒ- Test with invalid/expired tokens.<br>â€¢ **Role-Based Authorization**<br>â€ƒ- Apply `[Authorize(Roles="Admin")]`, `[Authorize(Roles="User")]` where needed.<br>â€¢ **Password Security**<br>â€ƒ- Implement **BCrypt hashing** for storing user passwords.<br>â€ƒ- Validate password during login.<br>â€¢ **Angular Integration**<br>â€ƒ- Store JWT securely in `localStorage`.<br>â€ƒ- Send `Authorization: Bearer <token>` header on API calls.<br>â€ƒ- Implement basic **route guard** in Angular (redirect to `/access/login` if no token).<br>â€¢ **Future Prep**<br>â€ƒ- Plan for **Refresh Tokens** and **token expiry handling** in Angular.<br>â€ƒ- Consider middleware for **global response format** (`{ success, data, errors }`). |
